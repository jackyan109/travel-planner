<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Planner</title>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;

            /* âœ… èƒŒæ™¯åœ–ï¼ˆä½ æä¾›çš„ï¼‰ */
            background-image: url("https://d1grca2t3zpuug.cloudfront.net/2025/06/f32837568_m-870x500-1750991180.webp");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* âœ… App æ¨¡æ“¬å¤–æ¡† */
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.88);
            backdrop-filter: blur(10px);
            min-height: 100vh;
            padding-bottom: 50px;
        }

        /* âœ… é ‚éƒ¨å°æ¨™é¡Œ */
        .top-banner {
            position: sticky;
            top: 0;
            z-index: 9999;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            padding: 12px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            border-bottom: 1px solid #ddd;
        }

        header {
            background: #fff;
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 48px;
            z-index: 999;
        }

        .container {
            padding: 15px;
        }

        section {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        h2 {
            margin-top: 0;
        }

        input, select, button {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            margin-bottom: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
        }

        button {
            background: #0078ff;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background: #005fcc;
        }

        iframe {
            width: 100%;
            height: 350px;
            border: none;
            border-radius: 10px;
        }

        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
<div class="app-container">

    <!-- âœ… é ‚éƒ¨å°æ¨™é¡Œ -->
    <div class="top-banner">ğŸ‡¯ğŸ‡µ æ±äº¬2025-2026</div>

    <header>
        <h1>Travel Planner</h1>
    </header>

    <div class="container">

        <!-- âœ… åœ°åœ–å€å¡Šï¼ˆå«æ—¥æœŸé¸æ“‡å™¨ï¼‰ -->
        <section id="map-section">
            <h2>åœ°åœ– Map</h2>

            <label>ğŸ“… é¸æ“‡æ—¥æœŸï¼š</label>
            <select id="map-date-selector"></select>

            <iframe id="map-frame"
                src="https://www.google.com/maps?q=Tokyo"
                allowfullscreen>
            </iframe>
        </section>

        <!-- âœ… è¡Œç¨‹ -->
        <section id="itinerary-section">
            <h2>è¡Œç¨‹ Itinerary</h2>
            <input type="text" id="itinerary-date" placeholder="DD-MM-YYYY">
            <input type="text" id="itinerary-place" placeholder="åœ°é»">
            <button id="add-itinerary">æ–°å¢è¡Œç¨‹</button>
            <ul id="itinerary-list"></ul>
        </section>

        <!-- âœ… é ç®— -->
        <section id="budget-section">
            <h2>é ç®— Budget</h2>
            <input type="number" id="budget-jpy" placeholder="æ—¥åœ“ JPY">
            <button id="convert-budget">è½‰æ›ç‚º HKD</button>
            <p id="budget-result"></p>
        </section>

        <!-- âœ… è³¼ç‰©æ¸…å–® -->
        <section id="shopping-section">
            <h2>è³¼ç‰©æ¸…å–® Shopping List</h2>
            <input type="text" id="shopping-item" placeholder="ç‰©å“åç¨±">
            <input type="file" id="shopping-image">
            <button id="add-shopping">æ–°å¢ç‰©å“</button>
            <ul id="shopping-list"></ul>
        </section>

    </div>
</div>

<!-- âœ… âœ… âœ… JavaScriptï¼ˆå«åœ°åœ–ä¾æ—¥æœŸåˆ‡æ›ï¼‰ -->
<script>
function loadItineraryFromStorage() {
    const data = localStorage.getItem("itinerary");
    return data ? JSON.parse(data) : {};
}

function parseDateDDMMYYYY(dateStr) {
    const [dd, mm, yyyy] = dateStr.split("-").map(Number);
    return new Date(yyyy, mm - 1, dd);
}

function updateMapForDate(date, itinerary) {
    const places = itinerary[date];

    if (!places || places.length === 0) {
        document.getElementById("map-frame").src =
            "https://www.google.com/maps?q=Tokyo";
        return;
    }

    const query = places.map(p => encodeURIComponent(p)).join("+");
    const url = `https://www.google.com/maps?q=${query}`;

    document.getElementById("map-frame").src = url;
}

function initMapDateSelector() {
    const itinerary = loadItineraryFromStorage();
    const selector = document.getElementById("map-date-selector");

    selector.innerHTML = "";

    const dates = Object.keys(itinerary);

    if (dates.length === 0) {
        selector.innerHTML = `<option>æ²’æœ‰è¡Œç¨‹</option>`;
        return;
    }

    dates.sort((a, b) => parseDateDDMMYYYY(a) - parseDateDDMMYYYY(b));

    dates.forEach(date => {
        const option = document.createElement("option");
        option.value = date;
        option.textContent = date;
        selector.appendChild(option);
    });

    const firstDate = dates[0];
    selector.value = firstDate;

    updateMapForDate(firstDate, itinerary);

    selector.addEventListener("change", () => {
        updateMapForDate(selector.value, itinerary);
    });
}

document.addEventListener("DOMContentLoaded", () => {

    initMapDateSelector();

    const itineraryInputDate = document.getElementById("itinerary-date");
    const itineraryInputPlace = document.getElementById("itinerary-place");
    const itineraryList = document.getElementById("itinerary-list");
    const addItineraryBtn = document.getElementById("add-itinerary");

    let itinerary = loadItineraryFromStorage();

    function renderItinerary() {
        itineraryList.innerHTML = "";
        for (const date in itinerary) {
            const places = itinerary[date];
            places.forEach((place) => {
                const li = document.createElement("li");
                li.textContent = `${date}: ${place}`;
                itineraryList.appendChild(li);
            });
        }
    }

    addItineraryBtn.addEventListener("click", () => {
        const date = itineraryInputDate.value.trim();
        const place = itineraryInputPlace.value.trim();

        if (!date || !place) return;

        if (!itinerary[date]) itinerary[date] = [];
        itinerary[date].push(place);

        localStorage.setItem("itinerary", JSON.stringify(itinerary));

        renderItinerary();
        initMapDateSelector();
    });

    renderItinerary();

    document.getElementById("convert-budget").addEventListener("click", () => {
        const jpy = Number(document.getElementById("budget-jpy").value);
        const hkd = (jpy * 0.052).toFixed(2);
        document.getElementById("budget-result").textContent = `HKD $${hkd}`;
    });

    const shoppingList = document.getElementById("shopping-list");
    const addShoppingBtn = document.getElementById("add-shopping");

    addShoppingBtn.addEventListener("click", () => {
        const item = document.getElementById("shopping-item").value.trim();
        const imgFile = document.getElementById("shopping-image").files[0];

        if (!item) return;

        const li = document.createElement("li");
        li.textContent = item;

        if (imgFile) {
            const img = document.createElement("img");
            img.src = URL.createObjectURL(imgFile);
            img.style.width = "80px";
            img.style.marginLeft = "10px";
            li.appendChild(img);
        }

        shoppingList.appendChild(li);
    });

});
</script>

</body>
</html>

});
</script>

</body>
</html>
